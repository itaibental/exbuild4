<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>עורך המבחנים - ExamBuilder 4.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="editor-layout">
        <main class="main-content">
            <div class="design-toolbar">
                <select id="fontFamilySelector" onchange="UI.updateDesign()">
                    <option value="'Rubik', sans-serif">Rubik (ברירת מחדל)</option>
                    <option value="Arial, sans-serif">Arial</option>
                    <option value="'Times New Roman', serif">Times New Roman</option>
                    <option value="'Courier New', monospace">Courier New</option>
                </select>
                <select id="fontSizeSelector" onchange="UI.updateDesign()">
                    <option value="16px">גודל רגיל (16px)</option>
                    <option value="18px">גודל בינוני (18px)</option>
                    <option value="20px">גודל גדול (20px)</option>
                </select>
                <button onclick="UI.addPart()" class="tool-btn"><i class="fas fa-layer-group"></i> הוסף פרק</button>
            </div>

            <div id="editor-container">
                </div>
            
            <div style="text-align: center; margin-top: 30px; color: #aaa;">
                <p>סוף המבחן</p>
            </div>
        </main>

        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>⚙️ הגדרות מערכת</h2>
            </div>
            
            <div class="setting-group">
                <label>שם המבחן:</label>
                <input type="text" id="examTitle" placeholder="לדוגמה: מבחן בהיסטוריה" oninput="ExamState.examTitle = this.value">
            </div>

            <div class="setting-group">
                <label>הנחיות כלליות:</label>
                <textarea id="generalInstructions" placeholder="הנחיות לנבחן..." oninput="ExamState.instructions.general = this.value"></textarea>
            </div>

            <div class="setting-group">
                <label>משך זמן (דקות):</label>
                <input type="number" id="examDuration" value="90" onchange="ExamState.duration = this.value">
            </div>

            <div class="setting-group">
                <label>שם בית הספר (לוגו URL):</label>
                <input type="text" id="logoUrl" placeholder="http://..." onchange="ExamState.logoData = this.value">
            </div>

            <div class="setting-group">
                <label>דוא"ל מורה (לקבלת העתק):</label>
                <input type="email" id="teacherEmail" onchange="ExamState.teacherEmail = this.value">
            </div>

            <div class="setting-group">
                <label>קישור לסקריפט (Google Apps Script):</label>
                <input type="text" id="driveLink" placeholder="https://script.google.com/..." onchange="ExamState.driveLink = this.value">
            </div>

            <div class="setting-group">
                <label>סיסמת מורה לשחרור נעילה:</label>
                <input type="text" id="unlockCode" placeholder="ברירת מחדל: 1234" onchange="ExamState.unlockCodeHash = this.value">
            </div>

            <div class="actions-panel">
                <button class="action-btn save" onclick="Generator.saveProject()"><i class="fas fa-save"></i> שמור פרויקט</button>
                <button class="action-btn export" onclick="Generator.generateHTML()"><i class="fas fa-file-export"></i> צור מבחן (HTML)</button>
                <button class="action-btn word" onclick="Generator.generateDOCX()"><i class="fas fa-file-word"></i> הורד כ-Word</button>
                <a href="index.html" class="back-link">חזרה למסך הבית</a>
            </div>
        </aside>
    </div>

    <div id="mediaModal" class="modal">
        <div class="modal-content">
            <h3>הוספת מדיה לשאלה</h3>
            <label>סוג מדיה:</label>
            <select id="mediaType">
                <option value="image">תמונה</option>
                <option value="video">וידאו (YouTube)</option>
            </select>
            <label>קישור (URL):</label>
            <input type="text" id="mediaUrl" placeholder="הדבק כאן את הקישור...">
            <div class="modal-actions">
                <button onclick="UI.closeModal()" class="cancel-btn">ביטול</button>
                <button onclick="UI.saveMedia()" class="confirm-btn">שמור</button>
            </div>
        </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/state.js"></script>
    <script src="js/generator.js"></script>
    <script src="js/generator-html.js"></script>
    <script src="js/generator-docx.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
